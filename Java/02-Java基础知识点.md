# Java 基础知识点

## 变量

### 定义

变量其实是 java 中的一个最基本的单元，也就是内存中的一块区域，Java 中的变量有四个基本属性：变量名，数据类型，存储单元和变量值

- 变量名：合法的标识符
- 变量的数据类型：可以是基本类型和引用类型（**必须包含类型**）
- 存储单元：存储单元大小是由数据类型决定的，如：int 为 4 个字节 32 位
- 变量值：在存储单元中放的就是变量值（如果是基本类型放的就是具体值，如果是引用类型放的是内存地址，如果 null，表示不指向任何对象）

### 基本格式

```java
type identifier [ = value][, identifier [= value] ...] ;
```

### 示例

```java
// 数据类型
public class PrimitiveTypeTest  {
  public static void main(String[] args){
    int i = 100;
    System.out.println(i); // 100
    int k;
    System.out.println(k); // 报错
    // 错误的原因是：变量没有初始化，变量初始化的过程就是赋值，变量使用前必须初始化。
  }
}
```

### 类型

Java 中主要有如下几种类型的变量

- 局部变量
- 类变量（静态变量）
- 成员变量（非静态变量）

示例：

```java
public class Variable{
    static int allClicks = 0;    // 类变量
    String str = "hello world";  // 实例变量
    public void method(){
        int i = 0;  // 局部变量
    }
}
```

#### 局部变量

- 局部变量声明在方法、构造方法或者语句块中；
- 局部变量在方法、构造方法、或者语句块被执行的时候创建，当它们执行完成后，变量将会被销毁；
- 访问修饰符不能用于局部变量；
- 局部变量只在声明它的方法、构造方法或者语句块中可见；
- 局部变量是在栈上分配的。
- 局部变量`没有默认值`，所以局部变量被声明后，必须经过初始化，才可以使用。

####  实例变量

- 实例变量声明在一个类中，但在方法、构造方法和语句块之外；
- 当一个对象被实例化之后，每个实例变量的值就跟着确定；
- 实例变量在对象创建的时候创建，在对象被销毁的时候销毁；
- 实例变量的值应该至少被一个方法、构造方法或者语句块引用，使得外部能够通过这些方式获取实例变量信息；
- 实例变量可以声明在使用前或者使用后；
- 访问修饰符可以修饰实例变量；
- 实例变量对于类中的方法、构造方法或者语句块是可见的。一般情况下应该把实例变量设为私有。通过使用访问修饰符可以使实例变量对子类可见；
- 实例变量具有`默认值`。数值型变量的默认值是0，布尔型变量的默认值是false，引用类型变量的默认值是null。变量的值可以在声明时指定，也可以在构造方法中指定；
- 实例变量可以直接通过变量名访问。但在静态方法以及其他类中，就应该使用完全限定名：ObjectReference.VariableName。

#### 类变量（静态变量）

- 类变量也称为静态变量，在类中以 static 关键字声明，但必须在方法之外。
- 无论一个类创建了多少个对象，类只拥有类变量的一份拷贝。
- 静态变量除了被声明为常量外很少使用，静态变量是指声明为 public/private，final 和 static 类型的变量。静态变量初始化后不可改变。
- 静态变量储存在静态存储区。经常被声明为常量，很少单独使用 static 声明变量。
- 静态变量在第一次被访问时创建，在程序结束时销毁。
- 与实例变量具有相似的可见性。但为了对类的使用者可见，大多数静态变量声明为 public 类型。
- `默认值和实例变量相似`。数值型变量默认值是 0，布尔型默认值是 false，引用类型默认值是 null。变量的值可以在声明的时候指定，也可以在构造方法中指定。此外，静态变量还可以在静态语句块中初始化。
- 静态变量可以通过：*ClassName.VariableName*的方式访问。
- 类变量被声明为 public static final 类型时，类变量名称一般建议使用大写字母。如果静态变量不是 public 和 final 类型，其命名方式与实例变量以及局部变量的命名方式一致。

#### 实例变量与类变量的区别

  访问：实例变量是通过定义类的对象来访问。类变量可以通过类或类对象来访问。

  生存周期  ：实例变量与类对象生存周期共存亡。类变量与类共存亡。

  变量修改：多个对象指向不同的实例变量堆内存，即实例变量的值只与对象相关。多个对象指向同一个类变量的堆内存，即类变量的值与类对象无关，为最后一次修改的值。



## 数据类型

### 作用

   数据类型的作用是指导JVM在运行程序的时候给该数据分配多大的内存空间

Java的两大数据类型：

- 内置数据类型
- 引用数据类型

### 内置数据类型

  基本数据类型分四大类八小种：

- 整数型

  byte,short,int,long

- 浮点型

  float,double

- 布尔型

  boolean

- 字符型

  char

| 基本数据类型 | 字节数 | 默认值  | 最小值                                  | 最大值                                   |
| :----------- | :----: | :-----: | --------------------------------------- | ---------------------------------------- |
| byte         |   1    |    0    | **-128(-2^7)**                          | **127 (2^7-1)**                          |
| short        |   2    |    0    | **-32768（-2^15）**                     | **32767（2^15 - 1）**                    |
| int          |   4    |    0    | **-2,147,483,648（-2^31）**             | **2,147,483,647（2^31 - 1）**            |
| long         |   8    |   0L    | **-9,223,372,036,854,775,808（-2^63）** | **9,223,372,036,854,775,807（2^63 -1）** |
| float        |   4    |  0.0f   | 1.4E-45                                 | 3.4028235E38                             |
| double       |   8    |  0.0d   | 4.9E-324                                | 1.7976931348623157E308                   |
| boolean      |   1    |  false  | false                                   | true                                     |
| char         |   2    | 'u0000' | \u0000 (0)                              | \uffff (65535)                           |

补充：

  一个字节等于八个比特位,一个比特位表示一个二进制位：1/0

1 Byte = 8 bit;

1 KB = 1024 Byte;

1MB = 1024 KB;

1GB = 1024 MB;

1TB = 1024 GB;

### 引用数据类型

- 引用类型指向一个对象，指向对象的变量是引用变量。这些变量在声明时被指定为一个特定的类型。变量一旦声明后，类型就不能被改变了。
- 对象、数组都是引用数据类型。
- 所有引用类型的默认值都是null。
- 一个引用变量可以用来引用任何与之兼容的类型。

补充： 字符串类型也是引用数据类型



### 二进制

  计算机是通过二进制存储数据的，由于正负整数进行位运算都是通过原码、反码、补码判别的，计算机在底层通过补码来存储和表示数据

正数的原码 反码 补码均相等

例如 5 原码 0000 0101 反码 0000 0101 补码 0000 0101

判断是否为正负数是通过第一个码值决定， 0为正 1为负

负数的 原码 反码 补码 各不相同

- 原码：符号位“1”+二进制数绝对值数值
- 反码：符号位“1”+数值位按位取反
- 补码：反码+“1”（末位）

例如 -5 原码 1000 0101 反码 1111 1010 补码 1111 1011

负数简单的转换方式：

  求负数的补码--将对应正数二进制表示的所有位数(包含符号位)取反，然后加1

  求负数的原码--补码的补码就是原码



### 类型转换

**整型、实型（常量）、字符型数据可以混合运算。运算中，不同类型的数据先转化为同一类型，然后进行运算**

```
转换从低级到高级。
低  ------------------------------------>  高

byte,short,char—> int —> long—> float —> double 
```

注意： 任何浮点型不管占用多少个字节，都比整数型容量搭 。

#### 转换规则

- 不能对boolean类型进行类型转换。
- 不能把对象类型转换成不相关类的对象。
- 在把容量大的类型转换为容量小的类型时必须使用强制类型转换。
- 转换过程中可能导致溢出或损失精度
- 浮点数到整数的转换是通过舍弃小数得到，而不是四舍五入

```java
int k = 128;
// 强制类型转换
byte b = (byte) k;  // -128  由于转换过程中溢出了，导致严重的精度缺失
// 为什么是 -128
// 分析
/*
  关键点： 计算机是通过二进制进行数据的存储的，并通过补码来表示、存储数据
  导致精度缺失的原因：位数变化
  int数据类型是4字节，32位，128转化为二进制如下：
  00000000 00000000 00000000 10000000
  byte数据类型是一字节，8位，128强制转换后为：
  10000000
  由于计算机是通过补码来存储数据，因此128强制类型后得出一个补码为10000000的数
  由于二进制第一位表示正负，通过二进制转化的规则得出10000000的原码为110000000，即-128
*/

// 浮点数到整数的转换是通过舍弃小数得到， 注意是舍弃，这很关键
(int)23.7 == 23;        
(int)-45.89f == -45
```

#### 自动类型转换

  低位数的数据类型可以自动转换为高位数的数据类型。

  如：short数据类型的位数为16位，就可以自动转换位数为32的int类型

#### 隐含强制类型转换

- 整数的默认类型是 int。
- 小数默认是 double 类型浮点型，在定义 float 类型时必须在数字后面跟上 F 或者 f。



##  运算符

- 算术运算符
- 关系运算符
- 位运算符
- 逻辑运算符
- 赋值运算符
- 其他运算符

### 位运算符

  应用于整数类型(int)，长整型(long)，短整型(short)，字符型(char)，和字节型(byte)等类型

| 操作符 | 描述                                                         |
| :----- | :----------------------------------------------------------- |
| ＆     | 如果相对应位都是1，则结果为1，否则为0                        |
| \|     | 如果相对应位都是 0，则结果为 0，否则为 1                     |
| ^      | 如果相对应位值相同，则结果为0，否则为1                       |
| 〜     | 按位取反运算符翻转操作数的每一位，即0变成1，1变成0。         |
| <<     | 按位左移运算符。左操作数按位左移右操作数指定的位数。         |
| >>     | 按位右移运算符。左操作数按位右移右操作数指定的位数。         |
| >>>    | 按位右移补零操作符。左操作数的值按右操作数指定的位数右移，移动得到的空位以零填充。 |

示例：

```java
A = 0011 1100
B = 0000 1101
-----------------
A&B = 0000 1100
A | B = 0011 1101
A ^ B = 0011 0001
~A= 1100 0011
A << 2 = 1111 0000
A >> 2 = 1111
A >>> 2 = 0000 1111
```

###  逻辑运算符

| 操作符 | 描述                                                         |
| :----- | :----------------------------------------------------------- |
| &&     | 称为逻辑与运算符。当且仅当两个操作数都为真，条件才为真。     |
| \| \|  | 称为逻辑或操作符。如果任何两个操作数任何一个为真，条件为真。 |
| ！     | 称为逻辑非运算符。用来反转操作数的逻辑状态。如果条件为true，则逻辑非运算符将得到false。 |